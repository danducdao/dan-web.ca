@using WebSite1.Classes;
@model IEnumerable<Product>

@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<h2>Products</h2>
<table class="ui celled striped collapsing table">
    <thead>
        <tr>
            <th>Product Name</th>
            <th>Quantity</th>
            <th>Price</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var product in Model)
        {
            <tr>
                <td>@product.ProductName</td>
                <td>@product.UnitsInStock</td>
                <td>@product.UnitPrice</td>
            </tr>
        }
    </tbody>
    <tfoot>
        <tr>
            <th colspan="3">
                <div class="ui right floated pagination menu">
                    @{
                        int previous = ViewBag.TotalPages;
                        if (ViewBag.Page > 1)
                        {
                            previous = ViewBag.Page - 1;
                        }else
                        {
                            previous = ViewBag.TotalPages;
                        }
                    }
                    <a class="icon item" href="@Url.Action("Index", "Product", new { page = previous })">
                        <i class='left chevron icon'></i>
                    </a>
                 
                    @for (int page = 1; page <= ViewBag.TotalPages; page++)
                    {
                        string title = (page).ToString();
                        @Html.ActionLink(title, "Index", "Product", new { page = page }, new { @class = "item " + ((ViewBag.Page == page || (ViewBag.Page == 0 && page == 1)) ? "active" : "") });
                    }
                            
                    @{ 
                        int next = 1;

                        if (ViewBag.Page < ViewBag.TotalPages)
                        {
                            if(ViewBag.Page == 0)
                            {
                                next = 2;
                            }
                            else
                            {
                                    next = ViewBag.Page + 1;
                            }  
                        }
                        else
                        {
                            next = 0;
                        }
                   }
                   <a class="icon item" href="@Url.Action("Index", "Product", new { page = next })">
                            <i class="right chevron icon"></i>
                   </a>
                </div>
            </th>
        </tr>
    </tfoot>
</table>
